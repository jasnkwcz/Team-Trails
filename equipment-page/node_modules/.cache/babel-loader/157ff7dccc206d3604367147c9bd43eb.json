{"ast":null,"code":"(function () {\n  \"use strict\";\n\n  var touchEnabled = (\"ontouchstart\" in document.documentElement);\n  var pressEvent = touchEnabled ? \"touchend\" : \"click\";\n  var each = [].forEach; // Name of the onTransitionEnd event supported by this browser\n\n  var transitionEnd = function () {\n    for (var names = \"transitionend webkitTransitionEnd oTransitionEnd otransitionend\".split(\" \"), i = 0; i < 4; ++i) if (\"on\" + names[i].toLowerCase() in window) return names[i];\n\n    return names[0];\n  }();\n  /**\n   * Conditionally add or remove a token from a token-list.\n   *\n   * @param {DOMTokenList} list\n   * @param {String} token\n   * @param {Boolean} enabled\n   */\n\n\n  function setToken(list, token, enabled) {\n    enabled ? list.add(token) : list.remove(token);\n  }\n  /**\n   * Stop a function from firing too quickly.\n   *\n   * Returns a copy of the original function that runs only after the designated\n   * number of milliseconds have elapsed. Useful for throttling onResize handlers.\n   *\n   * @param {Number} limit - Threshold to stall execution by, in milliseconds.\n   * @param {Boolean} soon - If TRUE, will call the function *before* the threshold's elapsed, rather than after.\n   * @return {Function}\n   */\n\n\n  function debounce(fn, limit, soon) {\n    var limit = limit < 0 ? 0 : limit,\n        started,\n        context,\n        args,\n        timer,\n        delayed = function () {\n      // Get the time between now and when the function was first fired\n      var timeSince = Date.now() - started;\n\n      if (timeSince >= limit) {\n        if (!soon) fn.apply(context, args);\n        if (timer) clearTimeout(timer);\n        timer = context = args = null;\n      } else timer = setTimeout(delayed, limit - timeSince);\n    }; // Debounced copy of the original function\n\n\n    return function () {\n      context = this, args = arguments;\n      if (!limit) return fn.apply(context, args);\n      started = Date.now();\n\n      if (!timer) {\n        if (soon) fn.apply(context, args);\n        timer = setTimeout(delayed, limit);\n      }\n    };\n  }\n\n  ;\n\n  var uniqueID = function () {\n    var IDs = {};\n    var indexes = {};\n    /**\n     * Generate a unique ID for a DOM element.\n     *\n     * By default, minimalist IDs like \"_1\" or \"_2\" are generated using internally\n     * tracked incrementation. Uglier, more collision-proof IDs can be generated by\n     * passing a truthy value to the function's first argument.\n     *\n     * Irrespective of whether values are being generated simply or randomly, the\n     * document tree is always consulted first to ensure a duplicate ID is never\n     * returned.\n     *\n     * @param {String}  prefix - Prefix prepended to result. Default: \"_\"\n     * @param {Boolean} random - Generate collision-proof IDs using random symbols\n     * @param {Number}  length - Length of random passwords. Default: 6\n     * @return {String}\n     */\n\n    function uniqueID(prefix, complex, length) {\n      length = +(length || 6);\n      var result = prefix = prefix || \"_\"; // Simple IDs\n\n      if (!complex) {\n        // Set this prefix's starting index if it's not been used yet\n        if (!indexes[prefix]) indexes[prefix] = 0;\n        result += ++indexes[prefix];\n      } // Uglier/safer IDs\n      else {\n          var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n          chars += chars.toLowerCase();\n          result += chars[Math.round(Math.random() * (chars.length - 1))];\n          chars += \"0123456789\";\n\n          while (result.length < length) result += chars[Math.round(Math.random() * (chars.length - 1))];\n        }\n\n      return IDs[result] || document.getElementById(result) ? uniqueID(prefix, complex) : (IDs[result] = true, result);\n    }\n\n    return uniqueID;\n  }(); // Name of the CSSOM property used by this browser for CSS transforms\n\n\n  var cssTransform = function (n) {\n    s = document.documentElement.style;\n    if ((prop = n.toLowerCase()) in s) return prop;\n\n    for (var prop, s, p = \"Webkit Moz Ms O Khtml\", p = (p.toLowerCase() + p).split(\" \"), i = 0; i < 10; ++i) if ((prop = p[i] + n) in s) return prop;\n\n    return \"\";\n  }(\"Transform\"); // Whether 3D transforms are supported by this browser\n\n\n  var css3DSupported = function (propName) {\n    var e = document.createElement(\"div\"),\n        s = e.style,\n        v = [[\"translateY(\", \")\"], [\"translate3d(0,\", \",0)\"]];\n\n    try {\n      s[propName] = v[1].join(\"1px\");\n    } catch (e) {}\n\n    return v[+!!s[propName]] === v[1];\n  }(cssTransform);\n\n  var folds = [];\n  /**\n   * Represents a single panel of togglable content inside an Accordion.\n   *\n   * @param {Accordion} accordion\n   * @param {HTMLElement} el\n   * @constructor\n   */\n\n  var Fold = function (accordion, el) {\n    var THIS = this;\n    var heading = el.firstElementChild;\n    var content = el.lastElementChild;\n    var elClasses = el.classList;\n    var openClass = accordion.openClass;\n    var closeClass = accordion.closeClass;\n    var keysEnabled = !accordion.noKeys;\n    var useBorders = accordion.useBorders;\n    var useTransforms = !accordion.noTransforms && cssTransform;\n    var onToggle = accordion.onToggle;\n    var _disabled = false;\n\n    var _open, _y, _height, _ariaEnabled;\n\n    var scrollX, scrollY;\n    var onTouchStart;\n    var onKeyDown;\n    var onPress;\n    Object.defineProperties(THIS, {\n      fit: {\n        value: fit\n      },\n      // Add or remove relevant ARIA attributes from the fold's elements\n      ariaEnabled: {\n        get: function () {\n          return _ariaEnabled;\n        },\n        set: function (input) {\n          if ((input = !!input) !== !!_ariaEnabled) {\n            _ariaEnabled = input; // Enable ARIA-attribute management\n\n            if (input) {\n              heading.setAttribute(\"role\", \"tab\");\n              content.setAttribute(\"role\", \"tabpanel\");\n              checkIDs(); // Update the attributes that're controlled by .open's setter\n\n              heading.setAttribute(\"aria-selected\", !!_open);\n              heading.setAttribute(\"aria-expanded\", !!_open);\n              content.setAttribute(\"aria-hidden\", !_open);\n            } // Disabling; remove all relevant attributes\n            else {\n                heading.removeAttribute(\"role\");\n                heading.removeAttribute(\"aria-controls\");\n                heading.removeAttribute(\"aria-selected\");\n                heading.removeAttribute(\"aria-expanded\");\n                content.removeAttribute(\"role\");\n                content.removeAttribute(\"aria-labelledby\");\n                content.removeAttribute(\"aria-hidden\");\n              }\n          }\n        }\n      },\n      // Whether or not the fold's currently opened\n      open: {\n        get: function () {\n          // Derive the fold's opened state from the DOM if it's not been determined yet\n          if (undefined === _open) {\n            _open = elClasses.contains(openClass);\n            setToken(elClasses, closeClass, !_open);\n          }\n\n          return _open;\n        },\n        set: function (input) {\n          if ((input = !!input) !== _open) {\n            // If an onToggle callback was specified, run it. Avoid doing anything if it returns false.\n            if (\"function\" === typeof onToggle && false === onToggle.call(null, THIS, input)) return;\n            setToken(elClasses, openClass, input);\n            setToken(elClasses, closeClass, !input);\n            _open = input; // Update ARIA attributes\n\n            if (_ariaEnabled) {\n              heading.setAttribute(\"aria-selected\", input);\n              heading.setAttribute(\"aria-expanded\", input);\n              content.setAttribute(\"aria-hidden\", !input);\n            } // If this fold was closed when the screen resized, run a full update in case its contents were juggled around\n\n\n            if (THIS.needsRefresh) {\n              delete THIS.needsRefresh;\n              accordion.refresh();\n            } else accordion.update(); // Close other folds if accordion is modal\n\n\n            if (accordion.modal && _open) {\n              for (var fold, i = 0, l = accordion.folds.length; i < l; ++i) {\n                if (THIS !== (fold = accordion.folds[i])) fold.open = false;\n              }\n            }\n          }\n        }\n      },\n      // Whether the fold's been deactivated\n      disabled: {\n        get: function () {\n          return _disabled;\n        },\n        set: function (input) {\n          if ((input = !!input) !== _disabled) {\n            var style = el.style; // Deactivated\n\n            if (_disabled = input) {\n              style.height = null;\n              useTransforms ? style[cssTransform] = null : style.top = null;\n              touchEnabled && heading.removeEventListener(\"touchstart\", onTouchStart);\n              heading.removeEventListener(pressEvent, onPress);\n              elClasses.remove(openClass, closeClass);\n\n              if (onKeyDown) {\n                heading.removeEventListener(\"keydown\", onKeyDown);\n                heading.removeAttribute(\"tabindex\");\n              }\n\n              if (_ariaEnabled) {\n                THIS.ariaEnabled = false;\n                _ariaEnabled = true;\n              }\n            } // Reactivated\n            else {\n                style.height = _height + \"px\";\n                useTransforms ? style[cssTransform] = css3DSupported ? \"translate3D(0,\" + _y + \"px,0)\" : \"translateY(\" + _y + \"px)\" : style.top = _y + \"px\";\n                touchEnabled && heading.addEventListener(\"touchstart\", onTouchStart);\n                heading.addEventListener(pressEvent, onPress);\n\n                if (onKeyDown) {\n                  heading.addEventListener(\"keydown\", onKeyDown);\n                  heading.tabIndex = 0;\n                }\n              }\n          }\n        }\n      },\n      // Vertical position of the fold within an accordion's container\n      y: {\n        get: function () {\n          if (undefined === _y) return _y = parseInt(el.style.top) || 0;\n          return _y;\n        },\n        set: function (input) {\n          if ((input = +input) !== _y) {\n            _y = input;\n            useTransforms ? el.style[cssTransform] = css3DSupported ? \"translate3D(0,\" + input + \"px,0)\" : \"translateY(\" + input + \"px)\" : el.style.top = input + \"px\";\n          }\n        }\n      },\n      // Height of the fold's outermost container\n      height: {\n        get: function () {\n          if (undefined === _height) {\n            _height = THIS.headingHeight + content.scrollHeight;\n            el.style.height = _height + \"px\";\n          }\n\n          return _height;\n        },\n        set: function (input) {\n          if (input && (input = +input) !== _height) {\n            el.style.height = input + \"px\";\n            _height = input;\n          }\n        }\n      },\n      // Current height of the fold's heading\n      headingHeight: {\n        get: function () {\n          return heading.scrollHeight + THIS.heightOffset + (useBorders ? THIS.headingBorder : 0);\n        }\n      },\n      // Total height consumed by the heading element's CSS borders, if any\n      headingBorder: {\n        get: function () {\n          return (heading.offsetHeight || 0) - (heading.clientHeight || 0);\n        }\n      },\n      // Total height of the fold's container element\n      elHeight: {\n        get: function () {\n          return el.scrollHeight + (useBorders ? THIS.elBorder : 0);\n        }\n      },\n      // Total height consumed by container element's CSS borders, if any\n      elBorder: {\n        get: function () {\n          return (el.offsetHeight || 0) - (el.clientHeight || 0);\n        }\n      },\n      // Whether the fold's container has been resized incorrectly\n      wrongSize: {\n        get: function () {\n          return THIS.headingHeight + content.scrollHeight !== el.scrollHeight;\n        }\n      }\n    });\n    THIS.index = folds.push(THIS) - 1;\n    THIS.accordion = accordion;\n    THIS.el = el;\n    THIS.heading = heading;\n    THIS.content = content;\n    THIS.ariaEnabled = !accordion.noAria;\n    THIS.heightOffset = accordion.heightOffset;\n    el.accordionFold = THIS.index;\n    useBorders = \"auto\" === useBorders ? 0 !== THIS.elBorder + THIS.headingBorder : useBorders;\n\n    function checkIDs() {\n      var headingSuffix = \"-heading\";\n      var contentSuffix = \"-content\";\n      var elID = el.id;\n      var id; // Neither of the fold's elements have an ID attribute\n\n      if (!heading.id && !content.id) {\n        id = elID || uniqueID(\"a\");\n        heading.id = id + headingSuffix;\n        content.id = id + contentSuffix;\n      } // Either the heading or element lack an ID\n      else if (!content.id) content.id = (elID || heading.id) + contentSuffix;else if (!heading.id) heading.id = (elID || content.id) + headingSuffix; // Finally, double-check each element's ID is really unique\n\n\n      var $ = function (s) {\n        return document.querySelectorAll(\"#\" + s);\n      };\n\n      while ($(content.id).length > 1 || $(heading.id).length > 1) {\n        id = uniqueID(\"a\");\n        content.id = id + contentSuffix;\n        heading.id = id + headingSuffix;\n      } // Update ARIA attributes\n\n\n      heading.setAttribute(\"aria-controls\", content.id);\n      content.setAttribute(\"aria-labelledby\", heading.id);\n    } // Keyboard navigation\n\n\n    if (keysEnabled) {\n      heading.tabIndex = 0;\n      heading.addEventListener(\"keydown\", onKeyDown = function (e) {\n        var key = e.keyCode;\n        var fold;\n\n        switch (key) {\n          // Spacebar: Toggle\n          case 32:\n            e.preventDefault();\n          // Fall-through\n          // Enter: Toggle\n\n          case 13:\n            THIS.open = !THIS.open;\n            if (\"A\" === e.target.tagName) e.preventDefault();\n            break;\n          // Escape: Clear focus\n\n          case 27:\n            e.target.blur();\n            break;\n          // Up arrow: Previous section\n\n          case 38:\n            {\n              // Is there a previous sibling to navigate up to?\n              if (fold = THIS.previousFold) {\n                var children = fold.childAccordions; // Is it open, and does it have nested accordions?\n\n                if (fold.open && children) {\n                  var lastAcc;\n                  var lastFold; // Locate the deepest/nearest accordion that's currently exposed\n\n                  while (children) {\n                    lastAcc = children[children.length - 1];\n                    lastFold = lastAcc.folds[lastAcc.folds.length - 1];\n                    if (!lastFold.open) break;\n                    children = lastFold.childAccordions;\n                  }\n\n                  lastFold.heading.focus();\n                } // Nope\n                else fold.heading.focus();\n              } // Is there a higher level we can jump back up to?\n              else if (accordion.parent) accordion.parentFold.heading.focus(); // There's nothing to move back to, so just let the browser run its usual behaviour\n                else return true;\n\n              e.preventDefault();\n              return false;\n            }\n          // Down arrow: Next section\n\n          case 40:\n            {\n              var children = THIS.childAccordions; // Is there a nested accordion to jump into?\n\n              if (THIS.open && children) children[0].folds[0].heading.focus(); // No, there isn't. Is there another sibling to move down to?\n              else if (fold = THIS.nextFold) fold.heading.focus(); // Is there a containing accordion we can navigate back up to?\n                else if (THIS.accordion.parent) {\n                    var parent = THIS;\n\n                    while (parent = parent.accordion.parentFold) if (fold = parent.nextFold) {\n                      fold.heading.focus();\n                      break;\n                    } // Nowhere left to go...\n\n\n                    if (!parent) return true;\n                  } // Nah. Just scroll the window normally, as per browser default\n                  else return true;\n              e.preventDefault();\n              return false;\n            }\n          // Left arrow\n\n          case 37:\n            {\n              // Close an opened section\n              if (THIS.open) THIS.open = false; // Switch focus back to parent\n              else if (accordion.parent) accordion.parentFold.heading.focus();\n              break;\n            }\n          // Right arrow\n\n          case 39:\n            {\n              var children = THIS.childAccordions; // Open a closed section\n\n              if (!THIS.open) THIS.open = true; // Switch focus to a nested accordion\n              else if (children) children[0].folds[0].heading.focus();\n              break;\n            }\n        }\n      });\n    } // Listener to record the viewport's scroll offsets at the beginning of a touch\n\n\n    touchEnabled && heading.addEventListener(\"touchstart\", onTouchStart = function (e) {\n      scrollX = window.pageXOffset;\n      scrollY = window.pageYOffset;\n    }, {\n      passive: true\n    });\n    heading.addEventListener(pressEvent, onPress = function (e) {\n      // Pressed on something inside the header\n      if (e.target !== heading && heading.contains(e.target)) {\n        // Cancel fold-toggle if user clicked on an anchor-link\n        if (\"A\" === e.target.tagName && e.target.href) return true;\n      }\n\n      if (e.type !== \"touchend\" || e.cancelable && window.pageXOffset === scrollX && window.pageYOffset === scrollY) {\n        THIS.open = !THIS.open;\n        e.preventDefault();\n      }\n\n      return false;\n    });\n    /**\n     * Adjust a fold's container to fit its content.\n     */\n\n    function fit() {\n      var height = THIS.headingHeight;\n      if (THIS.open) height += content.scrollHeight;\n      if (useBorders) height += THIS.elBorder;\n      THIS.height = height;\n    }\n  };\n\n  var accordions = [];\n  var activeAccordions = 0;\n  var lastResizeRate;\n  /**\n   * Represents a column of collapsible content regions.\n   *\n   * @param {HTMLElement} el                    - Container wrapped around each immediate fold\n   * @param {Object}      options               - Optional hash of settings\n   * @param {String}      options.openClass     - CSS class controlling each fold's \"open\" state\n   * @param {String}      options.closeClass    - CSS class used to mark a fold as closed\n   * @param {String}      options.edgeClass     - CSS class toggled based on whether the bottom-edge is visible\n   * @param {String}      options.snapClass     - CSS class for disabling transitions between window resizes\n   * @param {String}      options.enabledClass  - CSS class marking an accordion as enabled\n   * @param {String}      options.disabledClass - CSS class marking an accordion as disabled\n   * @param {Boolean}     options.disabled      - Whether to disable the accordion on creation\n   * @param {Boolean}     options.modal         - Whether to close the current fold when opening another\n   * @param {Boolean}     options.noAria        - Disable the addition and management of ARIA attributes\n   * @param {Boolean}     options.noKeys        - Disable keyboard navigation\n   * @param {Boolean}     options.noTransforms  - Disable CSS transforms; positioning will be used instead\n   * @param {Number}      options.heightOffset  - Distance to offset each fold by\n   * @param {Boolean}     options.useBorders    - Consider borders when calculating fold heights\n   * @param {Function}    options.onToggle      - Callback executed when opening or closing a fold\n   * @constructor\n   */\n\n  var Accordion = function (el, options) {\n    var THIS = this;\n    var elClasses = el.classList;\n    var options = options || {};\n    var edgeClass = undefined === options.edgeClass ? \"edge-visible\" : options.edgeClass;\n    var snapClass = undefined === options.snapClass ? \"snap\" : options.snapClass;\n    var enabledClass = undefined === options.enabledClass ? \"accordion\" : options.enabledClass;\n    var disabledClass = options.disabledClass;\n\n    var _height, _disabled, _parent, _parentFold, _modal;\n\n    Object.defineProperties(THIS, {\n      update: {\n        value: update\n      },\n      updateFold: {\n        value: updateFold\n      },\n      refresh: {\n        value: refresh\n      },\n      // Whether the accordion's been deactivated\n      disabled: {\n        get: function () {\n          return _disabled;\n        },\n        set: function (input) {\n          if ((input = !!input) !== _disabled) {\n            var style = el.style;\n            var folds = THIS.folds;\n            enabledClass && setToken(elClasses, enabledClass, !input);\n            disabledClass && setToken(elClasses, disabledClass, input); // Deactivating\n\n            if (_disabled = input) {\n              style.height = null;\n              snapClass && elClasses.remove(snapClass);\n\n              if (edgeClass) {\n                el.removeEventListener(transitionEnd, THIS.onTransitionEnd);\n                elClasses.remove(edgeClass);\n              }\n\n              for (var i = 0, l = folds.length; i < l; ++i) folds[i].disabled = true;\n\n              THIS.noAria || el.removeAttribute(\"role\");\n              --activeAccordions;\n            } // Reactivating\n            else {\n                for (var i = 0, l = folds.length; i < l; ++i) folds[i].disabled = false;\n\n                THIS.noAria || el.setAttribute(\"role\", \"tablist\");\n                ++activeAccordions;\n                update();\n              } // If there're no more active accordions, disable the onResize handler\n\n\n            if (activeAccordions <= 0) {\n              activeAccordions = 0;\n              Accordion.setResizeRate(false);\n            } // Otherwise, reactivate the onResize handler, assuming it was previously active\n            else if (lastResizeRate) Accordion.setResizeRate(lastResizeRate);\n          }\n        }\n      },\n      // Get or set the accordion enclosing this one\n      parent: {\n        set: function (input) {\n          _parent = input;\n        },\n        get: function () {\n          var result = _parent;\n          if (!result) return null; // Search for the first ancestor that *isn't* disabled\n\n          while (result) {\n            if (!result.disabled) return result;\n            result = result.parent;\n          }\n\n          return null;\n        }\n      },\n      // Get or set the fold of the accordion enclosing this one\n      parentFold: {\n        set: function (input) {\n          _parentFold = input;\n        },\n        get: function () {\n          var fold = _parentFold;\n          if (!fold) return null;\n          var accordion = fold.accordion; // Search for the first ancestor that *isn't* disabled\n\n          while (fold && accordion) {\n            if (!accordion.disabled) return fold;\n            if (accordion = accordion.parent) fold = accordion.parentFold;\n          }\n\n          return null;\n        }\n      },\n      // Height of the accordion's container element\n      height: {\n        get: function () {\n          return _height;\n        },\n        set: function (input) {\n          if (input && (input = +input) !== _height) {\n            el.style.height = input + \"px\";\n            _height = input;\n          }\n        }\n      },\n      // Whether one of the Accordion's folds has been resized incorrectly\n      wrongSize: {\n        get: function () {\n          var a = this.folds;\n          var l = a.length;\n          var i = 0;\n\n          for (; i < l; ++i) if (a[i].wrongSize) return true;\n\n          if (a = this.childAccordions) for (; i < l; ++i) if (a[i].wrongSize) return true;\n          return false;\n        }\n      },\n      // Top-level ancestor this accordion's nested inside\n      root: {\n        get: function () {\n          var result = this;\n\n          while (result) {\n            if (!result.parent) return result;\n            result = result.parent;\n          }\n        }\n      }\n    }); // Assign options as properties\n\n    THIS.openClass = options.openClass || \"open\";\n    THIS.closeClass = options.closeClass || \"closed\";\n    THIS.modal = !!options.modal;\n    THIS.noAria = !!options.noAria;\n    THIS.noKeys = !!options.noKeys;\n    THIS.noTransforms = !!options.noTransforms;\n    THIS.index = accordions.push(THIS) - 1;\n    THIS.heightOffset = +options.heightOffset || 0;\n    THIS.useBorders = undefined === options.useBorders ? \"auto\" : options.useBorders;\n    THIS.onToggle = options.onToggle; // Create a fold for each immediate descendant of the Accordion's container\n\n    var folds = [];\n    each.call(el.children, function (i) {\n      var fold = new Fold(THIS, i);\n      folds.push(fold); // Connect the fold to its previous sibling, if it's not the first to be added\n\n      var prev = folds[folds.length - 2];\n\n      if (prev) {\n        prev.nextFold = fold;\n        fold.previousFold = prev;\n      }\n    });\n    el.accordion = THIS.index;\n    THIS.noAria || el.setAttribute(\"role\", \"tablist\");\n    THIS.el = el;\n    THIS.folds = folds; // Add .enabledClass early - it might affect the heights of each fold\n\n    if (!options.disabled && enabledClass) elClasses.add(enabledClass);\n    update(); // Find out if this accordion's nested inside another\n\n    var next = el;\n\n    while ((next = next.parentNode) && 1 === next.nodeType) {\n      var fold = Accordion.getFold(next);\n\n      if (fold) {\n        var accordion = fold.accordion;\n        THIS.parent = accordion;\n        THIS.parentFold = fold;\n        edgeClass && elClasses.remove(edgeClass);\n        (accordion.childAccordions = accordion.childAccordions || []).push(THIS);\n        (fold.childAccordions = fold.childAccordions || []).push(THIS); // Adjust the height of the containing fold's element\n\n        if (fold.open) {\n          var scrollHeight = fold.el.scrollHeight;\n          var distance = fold.headingHeight + fold.content.scrollHeight - scrollHeight || scrollHeight - fold.el.clientHeight;\n          accordion.updateFold(fold, distance);\n        }\n\n        break;\n      }\n    }\n\n    edgeClass && el.addEventListener(transitionEnd, this.onTransitionEnd = function (e) {\n      if (!THIS.parent && e.target === el && \"height\" === e.propertyName && el.getBoundingClientRect().bottom > window.innerHeight) elClasses.remove(edgeClass);\n    });\n    this.disabled = !!options.disabled;\n    /**\n     * Internal method to check if an accordion's bottom-edge is visible to the user (or about to be).\n     *\n     * @param {Number} offset\n     * @private\n     */\n\n    function edgeCheck(offset) {\n      if (edgeClass) {\n        var box = el.getBoundingClientRect();\n        var windowEdge = window.innerHeight; // If the bottom-edge is visible (or about to be), enable height animation\n\n        if (box.bottom + (offset || 0) < windowEdge) elClasses.add(edgeClass); // If the bottom-edge isn't visible anyway, disable height animation immediately\n        else if (box.bottom > windowEdge) elClasses.remove(edgeClass);\n      }\n    }\n    /**\n     * Update the vertical ordinate of each sibling for a particular fold.\n     *\n     * @param {Fold} fold\n     * @param {Number} offset - Pixel distance to adjust by\n     */\n\n\n    function updateFold(fold, offset) {\n      var next = fold;\n      var parentFold = THIS.parentFold;\n\n      while (next = next.nextFold) next.y += offset;\n\n      parentFold || edgeCheck(offset);\n      fold.height += offset;\n      THIS.height += offset;\n      parentFold && parentFold.open && THIS.parent.updateFold(parentFold, offset);\n    }\n    /**\n     * Update the height of each fold to fit its content.\n     */\n\n\n    function update() {\n      var y = 0;\n      var height = 0;\n      var i = 0;\n      var l = folds.length;\n      var parentFold = THIS.parentFold;\n      var fold, diff;\n\n      for (; i < l; ++i) {\n        fold = folds[i];\n        fold.y = y;\n        fold.fit();\n        y += fold.height;\n        height += fold.height;\n      }\n\n      diff = height - _height;\n      parentFold ? parentFold.open && THIS.parent.updateFold(parentFold, diff) : edgeCheck(diff);\n      THIS.height = height;\n    }\n    /**\n     * Recalculate the boundaries of an Accordion and its descendants.\n     *\n     * This method should only be called if the width of a container changes,\n     * or a fold's contents have resized unexpectedly (such as when images load).\n     *\n     * @param {Boolean} allowSnap - Snap folds instantly into place without transitioning\n     */\n\n\n    function refresh(allowSnap) {\n      var snap = allowSnap ? snapClass : false;\n      snap && elClasses.add(snap);\n      THIS.update();\n      THIS.childAccordions && THIS.childAccordions.forEach(function (a) {\n        a.parentFold.open ? a.refresh(allowSnap) : a.parentFold.needsRefresh = true;\n      });\n      snap && setTimeout(function (e) {\n        elClasses.remove(snap);\n      }, 20);\n    }\n  }; // If IE8PP exists, it means the author wants/needs IE8 support. See also: tinyurl.com/fixIE8-9\n\n\n  if (\"function\" === typeof IE8PP) Accordion = IE8PP(Accordion), Fold = IE8PP(Fold);\n  /**\n   * Alter the rate at which screen-resize events update accordion widths.\n   *\n   * @param {Number} delay - Rate expressed in milliseconds\n   */\n\n  Accordion.setResizeRate = function (delay) {\n    var fn = function (e) {\n      for (var a, i = 0, l = accordions.length; i < l; ++i) {\n        a = accordions[i];\n        a.parent || a.disabled || a.refresh(true);\n      }\n    };\n\n    var THIS = Accordion;\n    THIS.onResize && window.removeEventListener(\"resize\", THIS.onResize); // Make sure we weren't passed an explicit value of FALSE, or a negative value\n\n    if (false !== delay && (delay = +delay || 0) >= 0) {\n      THIS.onResize = delay ? debounce(fn, delay) : fn;\n      window.addEventListener(\"resize\", THIS.onResize);\n      if (delay) lastResizeRate = delay;\n    }\n  };\n  /**\n   * Return the closest (most deeply-nested) accordion enclosing an element.\n   *\n   * @param {Node} node\n   * @return {Accordion}\n   */\n\n\n  Accordion.getAccordion = function (node) {\n    while (node) {\n      if (\"accordion\" in node) return accordions[node.accordion];\n      node = node.parentNode;\n      if (!node || node.nodeType !== 1) return null;\n    }\n  };\n  /**\n   * Return the closest (most deeply-nested) fold enclosing an element.\n   *\n   * @param {Node} node\n   * @return {Fold}\n   */\n\n\n  Accordion.getFold = function (node) {\n    while (node) {\n      if (\"accordionFold\" in node) return folds[node.accordionFold];\n      node = node.parentNode;\n      if (!node || node.nodeType !== 1) return null;\n    }\n  };\n\n  Accordion.setResizeRate(25); // Browser export\n\n  window.Accordion = Accordion; // CommonJS/Node.js\n\n  if (\"object\" === typeof module && \"object\" === typeof module.exports) module.exports.Accordion = Accordion; // AMD/UMD-like systems\n\n  return Accordion;\n})();","map":{"version":3,"sources":["C:/Users/turzm/equipment-page/src/components/Accordion/src/accordion.js"],"names":["touchEnabled","document","documentElement","pressEvent","each","forEach","transitionEnd","names","split","i","toLowerCase","window","setToken","list","token","enabled","add","remove","debounce","fn","limit","soon","started","context","args","timer","delayed","timeSince","Date","now","apply","clearTimeout","setTimeout","arguments","uniqueID","IDs","indexes","prefix","complex","length","result","chars","Math","round","random","getElementById","cssTransform","n","s","style","prop","p","css3DSupported","propName","e","createElement","v","join","folds","Fold","accordion","el","THIS","heading","firstElementChild","content","lastElementChild","elClasses","classList","openClass","closeClass","keysEnabled","noKeys","useBorders","useTransforms","noTransforms","onToggle","_disabled","_open","_y","_height","_ariaEnabled","scrollX","scrollY","onTouchStart","onKeyDown","onPress","Object","defineProperties","fit","value","ariaEnabled","get","set","input","setAttribute","checkIDs","removeAttribute","open","undefined","contains","call","needsRefresh","refresh","update","modal","fold","l","disabled","height","top","removeEventListener","addEventListener","tabIndex","y","parseInt","headingHeight","scrollHeight","heightOffset","headingBorder","offsetHeight","clientHeight","elHeight","elBorder","wrongSize","index","push","noAria","accordionFold","headingSuffix","contentSuffix","elID","id","$","querySelectorAll","key","keyCode","preventDefault","target","tagName","blur","previousFold","children","childAccordions","lastAcc","lastFold","focus","parent","parentFold","nextFold","pageXOffset","pageYOffset","passive","href","type","cancelable","accordions","activeAccordions","lastResizeRate","Accordion","options","edgeClass","snapClass","enabledClass","disabledClass","_parent","_parentFold","_modal","updateFold","onTransitionEnd","setResizeRate","a","root","prev","next","parentNode","nodeType","getFold","distance","propertyName","getBoundingClientRect","bottom","innerHeight","edgeCheck","offset","box","windowEdge","diff","allowSnap","snap","IE8PP","delay","onResize","getAccordion","node","module","exports"],"mappings":"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","sourcesContent":["(function(){\n\t\"use strict\";\n\n\tvar touchEnabled = \"ontouchstart\" in document.documentElement;\n\tvar pressEvent   = touchEnabled ? \"touchend\" : \"click\";\n\tvar each         = [].forEach;\n\n\n\t// Name of the onTransitionEnd event supported by this browser\n\tvar transitionEnd = (function(){\n\t\tfor(var names = \"transitionend webkitTransitionEnd oTransitionEnd otransitionend\".split(\" \"), i = 0; i < 4; ++i)\n\t\t\tif(\"on\"+names[i].toLowerCase() in window) return names[i];\n\t\treturn names[0];\n\t}());\n\t\n\t\n\t\n\t/**\n\t * Conditionally add or remove a token from a token-list.\n\t *\n\t * @param {DOMTokenList} list\n\t * @param {String} token\n\t * @param {Boolean} enabled\n\t */\n\tfunction setToken(list, token, enabled){\n\t\tenabled ? list.add(token) : list.remove(token);\n\t}\n\n\n\n\t/**\n\t * Stop a function from firing too quickly.\n\t *\n\t * Returns a copy of the original function that runs only after the designated\n\t * number of milliseconds have elapsed. Useful for throttling onResize handlers.\n\t *\n\t * @param {Number} limit - Threshold to stall execution by, in milliseconds.\n\t * @param {Boolean} soon - If TRUE, will call the function *before* the threshold's elapsed, rather than after.\n\t * @return {Function}\n\t */\n\tfunction debounce(fn, limit, soon){\n\t\tvar limit = limit < 0 ? 0 : limit,\n\t\t\tstarted, context, args, timer,\n\n\t\t\tdelayed = function(){\n\n\t\t\t\t// Get the time between now and when the function was first fired\n\t\t\t\tvar timeSince = Date.now() - started;\n\n\t\t\t\tif(timeSince >= limit){\n\t\t\t\t\tif(!soon) fn.apply(context, args);\n\t\t\t\t\tif(timer) clearTimeout(timer);\n\t\t\t\t\ttimer = context = args = null;\n\t\t\t\t}\n\n\t\t\t\telse timer = setTimeout(delayed, limit - timeSince);\n\t\t\t};\n\n\n\t\t// Debounced copy of the original function\n\t\treturn function(){\n\t\t\tcontext = this,\n\t\t\targs    = arguments;\n\n\t\t\tif(!limit)\n\t\t\t\treturn fn.apply(context, args);\n\n\t\t\tstarted = Date.now();\n\t\t\tif(!timer){\n\t\t\t\tif(soon) fn.apply(context, args);\n\t\t\t\ttimer = setTimeout(delayed, limit);\n\t\t\t}\n\t\t};\n\t};\n\n\n\n\tvar uniqueID = (function(){\n\t\tvar IDs     = {};\n\t\tvar indexes = {};\n\t\t\n\t\t\n\t\t/**\n\t\t * Generate a unique ID for a DOM element.\n\t\t *\n\t\t * By default, minimalist IDs like \"_1\" or \"_2\" are generated using internally\n\t\t * tracked incrementation. Uglier, more collision-proof IDs can be generated by\n\t\t * passing a truthy value to the function's first argument.\n\t\t *\n\t\t * Irrespective of whether values are being generated simply or randomly, the\n\t\t * document tree is always consulted first to ensure a duplicate ID is never\n\t\t * returned.\n\t\t *\n\t\t * @param {String}  prefix - Prefix prepended to result. Default: \"_\"\n\t\t * @param {Boolean} random - Generate collision-proof IDs using random symbols\n\t\t * @param {Number}  length - Length of random passwords. Default: 6\n\t\t * @return {String}\n\t\t */\n\t\tfunction uniqueID(prefix, complex, length){\n\t\t\tlength     = +(length || 6);\n\t\t\tvar result =  (prefix = prefix || \"_\");\n\t\t\t\n\t\t\t// Simple IDs\n\t\t\tif(!complex){\n\t\t\t\t\n\t\t\t\t// Set this prefix's starting index if it's not been used yet\n\t\t\t\tif(!indexes[prefix])\n\t\t\t\t\tindexes[prefix] = 0;\n\t\t\t\t\n\t\t\t\tresult += ++indexes[prefix];\n\t\t\t}\n\t\t\t\n\t\t\t// Uglier/safer IDs\n\t\t\telse{\n\t\t\t\tvar chars   = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\t\t\t\tchars      += chars.toLowerCase();\n\t\t\t\tresult     += chars[ Math.round(Math.random() * (chars.length - 1)) ];\n\t\t\t\tchars      += \"0123456789\";\n\t\t\t\t\n\t\t\t\twhile(result.length < length)\n\t\t\t\t\tresult += chars[ Math.round(Math.random() * (chars.length - 1))];\n\t\t\t}\n\t\t\t\n\t\t\treturn IDs[result] || document.getElementById(result)\n\t\t\t\t? uniqueID(prefix, complex)\n\t\t\t\t: (IDs[result] = true, result);\n\t\t}\n\t\t\n\t\t\n\t\treturn uniqueID;\n\t}());\n\n\n\t// Name of the CSSOM property used by this browser for CSS transforms\n\tvar cssTransform = (function(n){\n\t\ts = document.documentElement.style;\n\t\tif((prop = n.toLowerCase()) in s) return prop;\n\t\tfor(var prop, s, p = \"Webkit Moz Ms O Khtml\", p = (p.toLowerCase() + p).split(\" \"), i = 0; i < 10; ++i)\n\t\t\tif((prop = p[i]+n) in s) return prop;\n\t\treturn \"\";\n\t}(\"Transform\"));\n\n\n\t// Whether 3D transforms are supported by this browser\n\tvar css3DSupported = (function(propName){\n\t\tvar e = document.createElement(\"div\"), s = e.style,\n\t\tv = [[\"translateY(\", \")\"], [\"translate3d(0,\", \",0)\"]]\n\t\ttry{ s[propName] = v[1].join(\"1px\"); } catch(e){}\n\t\treturn v[+!!s[propName]] === v[1];\n\t}(cssTransform));\n\n\n\n\n\n\n\n\n\n\tvar folds = [];\n\n\n\t/**\n\t * Represents a single panel of togglable content inside an Accordion.\n\t *\n\t * @param {Accordion} accordion\n\t * @param {HTMLElement} el\n\t * @constructor\n\t */\n\tvar Fold = function(accordion, el){\n\t\tvar THIS            = this;\n\t\tvar heading         = el.firstElementChild;\n\t\tvar content         = el.lastElementChild;\n\t\tvar elClasses       = el.classList;\n\t\tvar openClass       = accordion.openClass;\n\t\tvar closeClass      = accordion.closeClass;\n\t\tvar keysEnabled     = !accordion.noKeys;\n\t\tvar useBorders      = accordion.useBorders;\n\t\tvar useTransforms   = !accordion.noTransforms && cssTransform;\n\t\tvar onToggle        = accordion.onToggle;\n\t\tvar _disabled       = false;\n\t\tvar _open, _y, _height, _ariaEnabled;\n\t\tvar scrollX, scrollY;\n\t\tvar onTouchStart;\n\t\tvar onKeyDown;\n\t\tvar onPress;\n\t\t\n\t\t\n\t\tObject.defineProperties(THIS, {\n\t\t\tfit: {value: fit},\n\t\t\t\n\t\t\t\n\t\t\t// Add or remove relevant ARIA attributes from the fold's elements\n\t\t\tariaEnabled: {\n\t\t\t\tget: function(){ return _ariaEnabled; },\n\t\t\t\tset: function(input){\n\t\t\t\t\tif((input = !!input) !== !!_ariaEnabled){\n\t\t\t\t\t\t_ariaEnabled = input;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Enable ARIA-attribute management\n\t\t\t\t\t\tif(input){\n\t\t\t\t\t\t\theading.setAttribute(\"role\", \"tab\");\n\t\t\t\t\t\t\tcontent.setAttribute(\"role\", \"tabpanel\");\n\t\t\t\t\t\t\tcheckIDs();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Update the attributes that're controlled by .open's setter\n\t\t\t\t\t\t\theading.setAttribute(\"aria-selected\", !!_open);\n\t\t\t\t\t\t\theading.setAttribute(\"aria-expanded\", !!_open);\n\t\t\t\t\t\t\tcontent.setAttribute(\"aria-hidden\",   !_open);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Disabling; remove all relevant attributes\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\theading.removeAttribute(\"role\");\n\t\t\t\t\t\t\theading.removeAttribute(\"aria-controls\");\n\t\t\t\t\t\t\theading.removeAttribute(\"aria-selected\");\n\t\t\t\t\t\t\theading.removeAttribute(\"aria-expanded\");\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcontent.removeAttribute(\"role\");\n\t\t\t\t\t\t\tcontent.removeAttribute(\"aria-labelledby\");\n\t\t\t\t\t\t\tcontent.removeAttribute(\"aria-hidden\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t\n\t\t\t\n\t\t\t// Whether or not the fold's currently opened\n\t\t\topen: {\n\t\t\t\t\n\t\t\t\tget: function(){\n\t\t\t\t\t\n\t\t\t\t\t// Derive the fold's opened state from the DOM if it's not been determined yet\n\t\t\t\t\tif(undefined === _open){\n\t\t\t\t\t\t_open = elClasses.contains(openClass);\n\t\t\t\t\t\tsetToken(elClasses, closeClass, !_open);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn _open;\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tset: function(input){\n\t\t\t\t\tif((input = !!input) !== _open){\n\t\t\t\t\t\t\n\t\t\t\t\t\t// If an onToggle callback was specified, run it. Avoid doing anything if it returns false.\n\t\t\t\t\t\tif(\"function\" === typeof onToggle && false === onToggle.call(null, THIS, input))\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetToken(elClasses, openClass,   input);\n\t\t\t\t\t\tsetToken(elClasses, closeClass, !input);\n\t\t\t\t\t\t_open = input;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Update ARIA attributes\n\t\t\t\t\t\tif(_ariaEnabled){\n\t\t\t\t\t\t\theading.setAttribute(\"aria-selected\",  input);\n\t\t\t\t\t\t\theading.setAttribute(\"aria-expanded\",  input);\n\t\t\t\t\t\t\tcontent.setAttribute(\"aria-hidden\",   !input);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// If this fold was closed when the screen resized, run a full update in case its contents were juggled around\n\t\t\t\t\t\tif(THIS.needsRefresh){\n\t\t\t\t\t\t\tdelete THIS.needsRefresh;\n\t\t\t\t\t\t\taccordion.refresh();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse accordion.update();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Close other folds if accordion is modal\n\t\t\t\t\t\tif(accordion.modal && _open){\n\t\t\t\t\t\t\tfor(var fold, i = 0, l = accordion.folds.length; i < l; ++i){\n\t\t\t\t\t\t\t\tif(THIS !== (fold = accordion.folds[i]))\n\t\t\t\t\t\t\t\t\tfold.open = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t// Whether the fold's been deactivated\n\t\t\tdisabled: {\n\t\t\t\tget: function(){ return _disabled },\n\t\t\t\tset: function(input){\n\t\t\t\t\tif((input = !!input) !== _disabled){\n\t\t\t\t\t\tvar style = el.style;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Deactivated\n\t\t\t\t\t\tif(_disabled = input){\n\t\t\t\t\t\t\tstyle.height = null;\n\t\t\t\t\t\t\tuseTransforms\n\t\t\t\t\t\t\t\t? (style[cssTransform] = null)\n\t\t\t\t\t\t\t\t: (style.top = null);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttouchEnabled && heading.removeEventListener(\"touchstart\", onTouchStart);\n\t\t\t\t\t\t\theading.removeEventListener(pressEvent, onPress);\n\t\t\t\t\t\t\telClasses.remove(openClass, closeClass);\n\t\t\t\t\t\t\tif(onKeyDown){\n\t\t\t\t\t\t\t\theading.removeEventListener(\"keydown\", onKeyDown);\n\t\t\t\t\t\t\t\theading.removeAttribute(\"tabindex\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(_ariaEnabled){\n\t\t\t\t\t\t\t\tTHIS.ariaEnabled = false;\n\t\t\t\t\t\t\t\t_ariaEnabled     = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Reactivated\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstyle.height = _height + \"px\";\n\t\t\t\t\t\t\tuseTransforms\n\t\t\t\t\t\t\t\t? style[cssTransform] =\n\t\t\t\t\t\t\t\t\tcss3DSupported\n\t\t\t\t\t\t\t\t\t\t? (\"translate3D(0,\" + _y + \"px,0)\")\n\t\t\t\t\t\t\t\t\t\t: (\"translateY(\"    + _y + \"px)\")\n\t\t\t\t\t\t\t\t: (style.top = _y + \"px\");\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttouchEnabled && heading.addEventListener(\"touchstart\", onTouchStart);\n\t\t\t\t\t\t\theading.addEventListener(pressEvent, onPress);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(onKeyDown){\n\t\t\t\t\t\t\t\theading.addEventListener(\"keydown\", onKeyDown);\n\t\t\t\t\t\t\t\theading.tabIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t// Vertical position of the fold within an accordion's container\n\t\t\ty: {\n\t\t\t\tget: function(){\n\t\t\t\t\tif(undefined === _y)\n\t\t\t\t\t\treturn (_y = parseInt(el.style.top) || 0);\n\t\t\t\t\treturn _y;\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tset: function(input){\n\t\t\t\t\tif((input = +input) !== _y){\n\t\t\t\t\t\t_y = input;\n\t\t\t\t\t\tuseTransforms\n\t\t\t\t\t\t\t? el.style[cssTransform] =\n\t\t\t\t\t\t\t\tcss3DSupported\n\t\t\t\t\t\t\t\t\t? (\"translate3D(0,\" + input + \"px,0)\")\n\t\t\t\t\t\t\t\t\t: (\"translateY(\"    + input + \"px)\")\n\t\t\t\t\t\t\t: (el.style.top = input + \"px\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t// Height of the fold's outermost container\n\t\t\theight: {\n\t\t\t\t\n\t\t\t\tget: function(){\n\t\t\t\t\tif(undefined === _height){\n\t\t\t\t\t\t_height = THIS.headingHeight + content.scrollHeight;\n\t\t\t\t\t\tel.style.height = _height + \"px\";\n\t\t\t\t\t}\n\t\t\t\t\treturn _height;\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tset: function(input){\n\t\t\t\t\tif(input && (input = +input) !== _height){\n\t\t\t\t\t\tel.style.height = input + \"px\"\n\t\t\t\t\t\t_height         = input;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\n\t\t\t// Current height of the fold's heading\n\t\t\theadingHeight: {\n\t\t\t\tget: function(){\n\t\t\t\t\treturn heading.scrollHeight\n\t\t\t\t\t\t+ THIS.heightOffset\n\t\t\t\t\t\t+ (useBorders ? THIS.headingBorder : 0)\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Total height consumed by the heading element's CSS borders, if any\n\t\t\theadingBorder: {\n\t\t\t\tget: function(){\n\t\t\t\t\treturn (heading.offsetHeight || 0) - (heading.clientHeight || 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t// Total height of the fold's container element\n\t\t\telHeight: {\n\t\t\t\tget: function(){\n\t\t\t\t\treturn el.scrollHeight + (useBorders ? THIS.elBorder : 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Total height consumed by container element's CSS borders, if any\n\t\t\telBorder: {\n\t\t\t\tget: function(){\n\t\t\t\t\treturn (el.offsetHeight || 0) - (el.clientHeight || 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t// Whether the fold's container has been resized incorrectly\n\t\t\twrongSize: {\n\t\t\t\tget: function(){\n\t\t\t\t\treturn THIS.headingHeight + content.scrollHeight !== el.scrollHeight;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\tTHIS.index        = folds.push(THIS) - 1;\n\t\tTHIS.accordion    = accordion;\n\t\tTHIS.el           = el;\n\t\tTHIS.heading      = heading;\n\t\tTHIS.content      = content;\n\t\tTHIS.ariaEnabled  = !accordion.noAria;\n\t\tTHIS.heightOffset = accordion.heightOffset;\n\t\tel.accordionFold  = THIS.index;\n\t\tuseBorders        = \"auto\" === useBorders ? (0 !== THIS.elBorder + THIS.headingBorder) : useBorders;\n\t\t\n\t\t\n\t\t\n\t\tfunction checkIDs(){\n\t\t\tvar headingSuffix = \"-heading\";\n\t\t\tvar contentSuffix = \"-content\";\n\t\t\tvar elID            = el.id;\n\t\t\tvar id;\n\t\t\t\n\t\t\t// Neither of the fold's elements have an ID attribute\n\t\t\tif(!heading.id && !content.id){\n\t\t\t\tid             = elID || uniqueID(\"a\");\n\t\t\t\theading.id     = id + headingSuffix;\n\t\t\t\tcontent.id     = id + contentSuffix;\n\t\t\t}\n\t\t\t\n\t\t\t// Either the heading or element lack an ID\n\t\t\telse if(!content.id) content.id   = (elID || heading.id) + contentSuffix;\n\t\t\telse if(!heading.id) heading.id   = (elID || content.id) + headingSuffix;\n\t\t\t\n\t\t\t// Finally, double-check each element's ID is really unique\n\t\t\tvar $ = function(s){return document.querySelectorAll(\"#\"+s)};\n\t\t\twhile($(content.id).length > 1 || $(heading.id).length > 1){\n\t\t\t\tid         = uniqueID(\"a\");\n\t\t\t\tcontent.id = id + contentSuffix;\n\t\t\t\theading.id = id + headingSuffix;\n\t\t\t}\n\t\t\t\n\t\t\t// Update ARIA attributes\n\t\t\theading.setAttribute(\"aria-controls\",    content.id);\n\t\t\tcontent.setAttribute(\"aria-labelledby\",  heading.id);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t// Keyboard navigation\n\t\tif(keysEnabled){\n\t\t\theading.tabIndex = 0;\n\t\t\theading.addEventListener(\"keydown\", onKeyDown = function(e){\n\t\t\t\tvar key = e.keyCode;\n\t\t\t\tvar fold;\n\t\t\t\t\n\t\t\t\tswitch(key){\n\n\t\t\t\t\t// Spacebar: Toggle\n\t\t\t\t\tcase 32:\n\t\t\t\t\t\te.preventDefault(); // Fall-through\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// Enter: Toggle\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tTHIS.open = !THIS.open;\n\t\t\t\t\t\tif(\"A\" === e.target.tagName)\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// Escape: Clear focus\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\te.target.blur();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// Up arrow: Previous section\n\t\t\t\t\tcase 38:{\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Is there a previous sibling to navigate up to?\n\t\t\t\t\t\tif(fold = THIS.previousFold){\n\t\t\t\t\t\t\tvar children = fold.childAccordions;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Is it open, and does it have nested accordions?\n\t\t\t\t\t\t\tif(fold.open && children){\n\t\t\t\t\t\t\t\tvar lastAcc;\n\t\t\t\t\t\t\t\tvar lastFold;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// Locate the deepest/nearest accordion that's currently exposed\n\t\t\t\t\t\t\t\twhile(children){\n\t\t\t\t\t\t\t\t\tlastAcc  = children[children.length - 1];\n\t\t\t\t\t\t\t\t\tlastFold = lastAcc.folds[lastAcc.folds.length - 1];\n\t\t\t\t\t\t\t\t\tif(!lastFold.open) break;\n\t\t\t\t\t\t\t\t\tchildren = lastFold.childAccordions;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlastFold.heading.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Nope\n\t\t\t\t\t\t\telse fold.heading.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Is there a higher level we can jump back up to?\n\t\t\t\t\t\telse if(accordion.parent)\n\t\t\t\t\t\t\taccordion.parentFold.heading.focus();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// There's nothing to move back to, so just let the browser run its usual behaviour\n\t\t\t\t\t\telse return true;\n\t\t\t\t\t\t\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// Down arrow: Next section\n\t\t\t\t\tcase 40:{\n\t\t\t\t\t\tvar children = THIS.childAccordions;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Is there a nested accordion to jump into?\n\t\t\t\t\t\tif(THIS.open && children)\n\t\t\t\t\t\t\tchildren[0].folds[0].heading.focus();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// No, there isn't. Is there another sibling to move down to?\n\t\t\t\t\t\telse if(fold = THIS.nextFold)\n\t\t\t\t\t\t\tfold.heading.focus();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Is there a containing accordion we can navigate back up to?\n\t\t\t\t\t\telse if(THIS.accordion.parent){\n\t\t\t\t\t\t\tvar parent = THIS;\n\t\t\t\t\t\t\twhile(parent = parent.accordion.parentFold)\n\t\t\t\t\t\t\t\tif(fold = parent.nextFold){\n\t\t\t\t\t\t\t\t\tfold.heading.focus();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Nowhere left to go...\n\t\t\t\t\t\t\tif(!parent) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Nah. Just scroll the window normally, as per browser default\n\t\t\t\t\t\telse return true;\n\t\t\t\t\t\t\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// Left arrow\n\t\t\t\t\tcase 37:{\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Close an opened section\n\t\t\t\t\t\tif(THIS.open) THIS.open = false;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Switch focus back to parent\n\t\t\t\t\t\telse if(accordion.parent)\n\t\t\t\t\t\t\taccordion.parentFold.heading.focus();\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Right arrow\n\t\t\t\t\tcase 39:{\n\t\t\t\t\t\tvar children = THIS.childAccordions;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Open a closed section\n\t\t\t\t\t\tif(!THIS.open) THIS.open = true;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Switch focus to a nested accordion\n\t\t\t\t\t\telse if(children)\n\t\t\t\t\t\t\tchildren[0].folds[0].heading.focus();\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t// Listener to record the viewport's scroll offsets at the beginning of a touch\n\t\ttouchEnabled && heading.addEventListener(\"touchstart\", onTouchStart = function(e){\n\t\t\tscrollX = window.pageXOffset;\n\t\t\tscrollY = window.pageYOffset;\n\t\t}, {passive: true});\n\t\t\n\t\t\n\t\theading.addEventListener(pressEvent, onPress = function(e){\n\t\t\t\n\t\t\t// Pressed on something inside the header\n\t\t\tif(e.target !== heading && heading.contains(e.target)){\n\t\t\t\t\n\t\t\t\t// Cancel fold-toggle if user clicked on an anchor-link\n\t\t\t\tif(\"A\" === e.target.tagName && e.target.href)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif(e.type !== \"touchend\" || (e.cancelable && window.pageXOffset === scrollX && window.pageYOffset === scrollY)){\n\t\t\t\tTHIS.open = !THIS.open;\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t/**\n\t\t * Adjust a fold's container to fit its content.\n\t\t */\n\t\tfunction fit(){\n\t\t\tvar height = THIS.headingHeight;\n\t\t\tif(THIS.open)   height += content.scrollHeight;\n\t\t\tif(useBorders)  height += THIS.elBorder;\n\t\t\tTHIS.height = height;\n\t\t}\n\t}\n\n\n\n\n\n\n\n\tvar accordions       = [];\n\tvar activeAccordions = 0;\n\tvar lastResizeRate;\n\n\n\t/**\n\t * Represents a column of collapsible content regions.\n\t *\n\t * @param {HTMLElement} el                    - Container wrapped around each immediate fold\n\t * @param {Object}      options               - Optional hash of settings\n\t * @param {String}      options.openClass     - CSS class controlling each fold's \"open\" state\n\t * @param {String}      options.closeClass    - CSS class used to mark a fold as closed\n\t * @param {String}      options.edgeClass     - CSS class toggled based on whether the bottom-edge is visible\n\t * @param {String}      options.snapClass     - CSS class for disabling transitions between window resizes\n\t * @param {String}      options.enabledClass  - CSS class marking an accordion as enabled\n\t * @param {String}      options.disabledClass - CSS class marking an accordion as disabled\n\t * @param {Boolean}     options.disabled      - Whether to disable the accordion on creation\n\t * @param {Boolean}     options.modal         - Whether to close the current fold when opening another\n\t * @param {Boolean}     options.noAria        - Disable the addition and management of ARIA attributes\n\t * @param {Boolean}     options.noKeys        - Disable keyboard navigation\n\t * @param {Boolean}     options.noTransforms  - Disable CSS transforms; positioning will be used instead\n\t * @param {Number}      options.heightOffset  - Distance to offset each fold by\n\t * @param {Boolean}     options.useBorders    - Consider borders when calculating fold heights\n\t * @param {Function}    options.onToggle      - Callback executed when opening or closing a fold\n\t * @constructor\n\t */\n\tvar Accordion = function(el, options){\n\t\tvar THIS          = this;\n\t\tvar elClasses     = el.classList;\n\t\tvar options       = options || {};\n\t\tvar edgeClass     = (undefined === options.edgeClass    ? \"edge-visible\" : options.edgeClass);\n\t\tvar snapClass     = (undefined === options.snapClass    ? \"snap\"         : options.snapClass);\n\t\tvar enabledClass  = (undefined === options.enabledClass ? \"accordion\"    : options.enabledClass);\n\t\tvar disabledClass = options.disabledClass;\n\t\tvar _height, _disabled, _parent, _parentFold, _modal;\n\n\n\t\tObject.defineProperties(THIS, {\n\t\t\tupdate:     {value: update},\n\t\t\tupdateFold: {value: updateFold},\n\t\t\trefresh:    {value: refresh},\n\t\t\t\n\t\t\t// Whether the accordion's been deactivated\n\t\t\tdisabled: {\n\t\t\t\tget: function(){ return _disabled; },\n\t\t\t\tset: function(input){\n\t\t\t\t\tif((input = !!input) !== _disabled){\n\t\t\t\t\t\tvar style   = el.style;\n\t\t\t\t\t\tvar folds   = THIS.folds;\n\t\t\t\t\t\t\n\t\t\t\t\t\tenabledClass  && setToken(elClasses, enabledClass,  !input);\n\t\t\t\t\t\tdisabledClass && setToken(elClasses, disabledClass,  input);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Deactivating\n\t\t\t\t\t\tif(_disabled = input){\n\t\t\t\t\t\t\tstyle.height = null;\n\t\t\t\t\t\t\tsnapClass && elClasses.remove(snapClass);\n\t\t\t\t\t\t\tif(edgeClass){\n\t\t\t\t\t\t\t\tel.removeEventListener(transitionEnd, THIS.onTransitionEnd);\n\t\t\t\t\t\t\t\telClasses.remove(edgeClass);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tfor(var i = 0, l = folds.length; i < l; ++i)\n\t\t\t\t\t\t\t\tfolds[i].disabled = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tTHIS.noAria || el.removeAttribute(\"role\");\n\t\t\t\t\t\t\t--activeAccordions;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Reactivating\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tfor(var i = 0, l = folds.length; i < l; ++i)\n\t\t\t\t\t\t\t\tfolds[i].disabled = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tTHIS.noAria || el.setAttribute(\"role\", \"tablist\");\n\t\t\t\t\t\t\t++activeAccordions;\n\t\t\t\t\t\t\tupdate();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t\n\t\t\t\t\t\t// If there're no more active accordions, disable the onResize handler\n\t\t\t\t\t\tif(activeAccordions <= 0){\n\t\t\t\t\t\t\tactiveAccordions = 0;\n\t\t\t\t\t\t\tAccordion.setResizeRate(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Otherwise, reactivate the onResize handler, assuming it was previously active\n\t\t\t\t\t\telse if(lastResizeRate)\n\t\t\t\t\t\t\tAccordion.setResizeRate(lastResizeRate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Get or set the accordion enclosing this one\n\t\t\tparent: {\n\t\t\t\tset: function(input){ _parent = input; },\n\t\t\t\tget: function(){\n\t\t\t\t\tvar result = _parent;\n\t\t\t\t\tif(!result) return null;\n\t\t\t\t\t\n\t\t\t\t\t// Search for the first ancestor that *isn't* disabled\n\t\t\t\t\twhile(result){\n\t\t\t\t\t\tif(!result.disabled) return result;\n\t\t\t\t\t\tresult = result.parent;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Get or set the fold of the accordion enclosing this one\n\t\t\tparentFold: {\n\t\t\t\tset: function(input){ _parentFold = input; },\n\t\t\t\tget: function(){\n\t\t\t\t\tvar fold = _parentFold;\n\t\t\t\t\tif(!fold) return null;\n\t\t\t\t\t\n\t\t\t\t\tvar accordion = fold.accordion;\n\t\t\t\t\t\n\t\t\t\t\t// Search for the first ancestor that *isn't* disabled\n\t\t\t\t\twhile(fold && accordion){\n\t\t\t\t\t\tif(!accordion.disabled) return fold;\n\t\t\t\t\t\tif(accordion = accordion.parent)\n\t\t\t\t\t\t\tfold = accordion.parentFold;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Height of the accordion's container element\n\t\t\theight: {\n\t\t\t\tget: function(){ return _height; },\n\t\t\t\tset: function(input){\n\t\t\t\t\tif(input && (input = +input) !== _height){\n\t\t\t\t\t\tel.style.height = input + \"px\";\n\t\t\t\t\t\t_height         = input;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Whether one of the Accordion's folds has been resized incorrectly\n\t\t\twrongSize: {\n\t\t\t\tget: function(){\n\t\t\t\t\tvar a = this.folds;\n\t\t\t\t\tvar l = a.length;\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tfor(; i < l; ++i) if(a[i].wrongSize) return true;\n\t\t\t\t\tif(a = this.childAccordions)\n\t\t\t\t\tfor(; i < l; ++i) if(a[i].wrongSize) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Top-level ancestor this accordion's nested inside\n\t\t\troot: {\n\t\t\t\tget: function(){\n\t\t\t\t\tvar result = this;\n\t\t\t\t\twhile(result){\n\t\t\t\t\t\tif(!result.parent) return result;\n\t\t\t\t\t\tresult = result.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t\n\t\t// Assign options as properties\n\t\tTHIS.openClass    = options.openClass  || \"open\";\n\t\tTHIS.closeClass   = options.closeClass || \"closed\";\n\t\tTHIS.modal        = !!options.modal;\n\t\tTHIS.noAria       = !!options.noAria;\n\t\tTHIS.noKeys       = !!options.noKeys;\n\t\tTHIS.noTransforms = !!options.noTransforms;\n\t\tTHIS.index        = accordions.push(THIS) - 1;\n\t\tTHIS.heightOffset = +options.heightOffset || 0;\n\t\tTHIS.useBorders   = undefined === options.useBorders ? \"auto\" : options.useBorders;\n\t\tTHIS.onToggle     = options.onToggle;\n\t\t\n\t\t\n\t\t// Create a fold for each immediate descendant of the Accordion's container\n\t\tvar folds = [];\n\t\teach.call(el.children, function(i){\n\t\t\tvar fold = new Fold(THIS, i);\n\t\t\tfolds.push(fold);\n\t\t\t\n\t\t\t// Connect the fold to its previous sibling, if it's not the first to be added\n\t\t\tvar prev = folds[folds.length - 2];\n\t\t\tif(prev){\n\t\t\t\tprev.nextFold     = fold;\n\t\t\t\tfold.previousFold = prev;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\tel.accordion    = THIS.index;\n\t\tTHIS.noAria || el.setAttribute(\"role\", \"tablist\");\n\t\tTHIS.el         = el;\n\t\tTHIS.folds      = folds;\n\t\t\n\t\t// Add .enabledClass early - it might affect the heights of each fold\n\t\tif(!options.disabled && enabledClass)\n\t\t\telClasses.add(enabledClass);\n\t\t\n\t\tupdate();\n\t\t\n\t\t\n\t\t// Find out if this accordion's nested inside another\n\t\tvar next = el;\n\t\twhile((next = next.parentNode) && 1 === next.nodeType){\n\t\t\tvar fold = Accordion.getFold(next);\n\t\t\tif(fold){\n\t\t\t\tvar accordion   = fold.accordion;\n\t\t\t\tTHIS.parent     = accordion;\n\t\t\t\tTHIS.parentFold = fold;\n\t\t\t\tedgeClass && elClasses.remove(edgeClass);\n\t\t\t\t(accordion.childAccordions = accordion.childAccordions || []).push(THIS);\n\t\t\t\t(fold.childAccordions      = fold.childAccordions      || []).push(THIS);\n\n\t\t\t\t// Adjust the height of the containing fold's element\n\t\t\t\tif(fold.open){\n\t\t\t\t\tvar scrollHeight = fold.el.scrollHeight;\n\t\t\t\t\tvar distance     = (fold.headingHeight + fold.content.scrollHeight) - scrollHeight || (scrollHeight - fold.el.clientHeight);\n\t\t\t\t\taccordion.updateFold(fold, distance);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tedgeClass && el.addEventListener(transitionEnd, this.onTransitionEnd = function(e){\n\t\t\tif(!THIS.parent && e.target === el && \"height\" === e.propertyName && el.getBoundingClientRect().bottom > window.innerHeight)\n\t\t\t\telClasses.remove(edgeClass);\n\t\t});\n\t\t\n\t\tthis.disabled = !!options.disabled;\n\t\t\n\t\t\n\t\t\n\t\t/**\n\t\t * Internal method to check if an accordion's bottom-edge is visible to the user (or about to be).\n\t\t *\n\t\t * @param {Number} offset\n\t\t * @private\n\t\t */\n\t\tfunction edgeCheck(offset){\n\t\t\tif(edgeClass){\n\t\t\t\tvar box         = el.getBoundingClientRect();\n\t\t\t\tvar windowEdge  = window.innerHeight;\n\t\t\t\t\n\t\t\t\t// If the bottom-edge is visible (or about to be), enable height animation\n\t\t\t\tif(box.bottom + (offset || 0) < windowEdge)\n\t\t\t\t\telClasses.add(edgeClass)\n\t\t\t\t\n\t\t\t\t// If the bottom-edge isn't visible anyway, disable height animation immediately\n\t\t\t\telse if(box.bottom > windowEdge)\n\t\t\t\t\telClasses.remove(edgeClass);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t/**\n\t\t * Update the vertical ordinate of each sibling for a particular fold.\n\t\t *\n\t\t * @param {Fold} fold\n\t\t * @param {Number} offset - Pixel distance to adjust by\n\t\t */\n\t\tfunction updateFold(fold, offset){\n\t\t\tvar next = fold;\n\t\t\tvar parentFold = THIS.parentFold;\n\t\t\t\n\t\t\twhile(next = next.nextFold)\n\t\t\t\tnext.y  += offset;\n\t\t\tparentFold || edgeCheck(offset);\n\t\t\tfold.height += offset;\n\t\t\tTHIS.height += offset;\n\t\t\t\n\t\t\tparentFold && parentFold.open && THIS.parent.updateFold(parentFold, offset);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * Update the height of each fold to fit its content.\n\t\t */\n\t\tfunction update(){\n\t\t\tvar y      = 0;\n\t\t\tvar height = 0;\n\t\t\tvar i      = 0;\n\t\t\tvar l      = folds.length;\n\t\t\tvar parentFold = THIS.parentFold;\n\t\t\tvar fold, diff;\n\t\t\t\n\t\t\tfor(; i < l; ++i){\n\t\t\t\tfold   = folds[i];\n\t\t\t\tfold.y = y;\n\t\t\t\tfold.fit();\n\t\t\t\ty      += fold.height;\n\t\t\t\theight += fold.height;\n\t\t\t}\n\t\t\t\n\t\t\tdiff = height - _height;\n\t\t\tparentFold\n\t\t\t\t? (parentFold.open && THIS.parent.updateFold(parentFold, diff))\n\t\t\t\t: edgeCheck(diff);\n\t\t\t\n\t\t\tTHIS.height = height;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t/**\n\t\t * Recalculate the boundaries of an Accordion and its descendants.\n\t\t *\n\t\t * This method should only be called if the width of a container changes,\n\t\t * or a fold's contents have resized unexpectedly (such as when images load).\n\t\t *\n\t\t * @param {Boolean} allowSnap - Snap folds instantly into place without transitioning\n\t\t */\n\t\tfunction refresh(allowSnap){\n\t\t\tvar snap = allowSnap ? snapClass : false;\n\t\t\tsnap && elClasses.add(snap);\n\t\t\t\n\t\t\tTHIS.update();\n\t\t\tTHIS.childAccordions && THIS.childAccordions.forEach(function(a){\n\t\t\t\ta.parentFold.open\n\t\t\t\t\t? a.refresh(allowSnap)\n\t\t\t\t\t: (a.parentFold.needsRefresh = true);\n\t\t\t});\n\t\t\t\n\t\t\tsnap && setTimeout(function(e){elClasses.remove(snap)}, 20);\n\t\t}\n\t}\n\n\t// If IE8PP exists, it means the author wants/needs IE8 support. See also: tinyurl.com/fixIE8-9\n\tif(\"function\" === typeof IE8PP)\n\t\tAccordion = IE8PP(Accordion),\n\t\tFold      = IE8PP(Fold);\n\n\n\n\t/**\n\t * Alter the rate at which screen-resize events update accordion widths.\n\t *\n\t * @param {Number} delay - Rate expressed in milliseconds\n\t */\n\tAccordion.setResizeRate = function(delay){\n\t\tvar fn = function(e){\n\t\t\tfor(var a, i = 0, l = accordions.length; i < l; ++i){\n\t\t\t\ta = accordions[i];\n\t\t\t\ta.parent || a.disabled || a.refresh(true);\n\t\t\t}\n\t\t};\n\t\t\n\t\tvar THIS = Accordion;\n\t\tTHIS.onResize && window.removeEventListener(\"resize\", THIS.onResize);\n\t\t\n\t\t// Make sure we weren't passed an explicit value of FALSE, or a negative value\n\t\tif(false !== delay && (delay = +delay || 0) >= 0){\n\t\t\tTHIS.onResize = delay ? debounce(fn, delay) : fn;\n\t\t\twindow.addEventListener(\"resize\", THIS.onResize);\n\t\t\tif(delay) lastResizeRate = delay;\n\t\t}\n\t}\n\t\n\t\n\t\n\t/**\n\t * Return the closest (most deeply-nested) accordion enclosing an element.\n\t *\n\t * @param {Node} node\n\t * @return {Accordion}\n\t */\n\tAccordion.getAccordion = function(node){\n\t\twhile(node){\n\t\t\tif(\"accordion\" in node)\n\t\t\t\treturn accordions[node.accordion];\n\t\t\t\n\t\t\tnode = node.parentNode;\n\t\t\tif(!node || node.nodeType !== 1) return null;\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * Return the closest (most deeply-nested) fold enclosing an element.\n\t *\n\t * @param {Node} node\n\t * @return {Fold}\n\t */\n\tAccordion.getFold = function(node){\n\t\twhile(node){\n\t\t\tif(\"accordionFold\" in node)\n\t\t\t\treturn folds[node.accordionFold];\n\t\t\t\n\t\t\tnode = node.parentNode;\n\t\t\tif(!node || node.nodeType !== 1) return null;\n\t\t}\n\t}\n\t\n\n\t\n\tAccordion.setResizeRate(25);\n\t\n\t\n\t// Browser export\n\twindow.Accordion = Accordion;\n\t\n\t// CommonJS/Node.js\n\tif(\"object\" === typeof module && \"object\" === typeof module.exports)\n\t\tmodule.exports.Accordion = Accordion;\n\t\n\t// AMD/UMD-like systems\n\treturn Accordion;\n}());\n"]},"metadata":{},"sourceType":"module"}